language: python
python:
 - "3.6"
 - "3.7"
 - "3.8"


before_install:
 - pip3 install -U --only-binary=numpy --only-binary=scipy numpy scipy 

install:
 - pip3 install pytest pytest-cov coveralls
 - python setup.py install

script:
 - pytest --cov=polyrat --cov-branch  tests/

after_success:
 - coveralls


deploy:
  distributions: "sdist"
  on:
    branch: master
    tags: true
  provider: pypi
  username: __token__
  password:
  secure: 	

